#/usr/bin/bash
#script to install and configure haproxy load balancer
sudo apt -y install software-properties-common
sudo add-apt-repository ppa:vbernat/haproxy-2.6 -y
sudo apt -y update
sudo apt install haproxy -y
config = "
frontend www-http
        bind *:80
        mode http
        default_backend apache

backend apache
        mode http
        balance roundrobin
        server web-01 100.26.173.25
        server web-02 52.91.123.57
"
echo $config > /etc/haproxy/haproxy.cfg
sudo systemctl restart haproxy
